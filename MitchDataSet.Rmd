---
title: "MitchDataSet"
output: html_document
---

```{r}
library(tidyverse)
library(polite)
library(rvest)
```

```{r}
# code to scrape from wikipedia and clean up list of team abbreviations
robotstxt::paths_allowed("https://en.wikipedia.org/wiki/Wikipedia:WikiProject_National_Basketball_Association/National_Basketball_Association_team_abbreviations")

team_abbv_wiki <- read_html("https://en.wikipedia.org/wiki/Wikipedia:WikiProject_National_Basketball_Association/National_Basketball_Association_team_abbreviations")

team_abbv_temp <- html_nodes(team_abbv_wiki, "td:nth-child(1)")

team_abbv <- html_text(team_abbv_temp)

# cleaning up data
for (i in seq_along(team_abbv)) {
  team_abbv[i] <- str_replace(team_abbv[i], "^(.)(.)(.).*$", "\\1\\2\\3")
  team_abbv[i] <- str_remove(team_abbv[i], "\n")
}

team_abbv
```


```{r}
# function to scrape basketball data
basketball_tibble <- function(team, year = 2025) {
  url = str_c("https://www.basketball-reference.com/teams/", team, "/", year, ".html")
  robotstxt::paths_allowed(url)
  teamsite <- read_html(url)
  team_opp_temp <- html_nodes(teamsite, "#team_and_opponent .center , #team_and_opponent .left", css = "table")
  # more code here that will clean up each tibble within the this
}
cavs <- basketball_tibble("CLE", 2025) # test function
cavs

# what will eventually create our combined tibble 
basketball_data_temp <- map2(team_abbv, 2025, basketball_tibble)
in_season_basketball <- list_rbind(basketball_data_temp)
```

